# 5부 아키텍처-03

### 정리
##### 25장 계층과 경계
시스템이 복잡해질수록 컴포넌트 구조는 더 많은 흐름으로 분리가 됨
아키텍처 경계가 어디에나 존재하고 아키텍처 경계가 언제 필요한지를 신중하게 파악해야 함
어떤 아키텍처 경계도 존재하지 않는 상황에서 경계가 정말로 필요하다는 사실을 발견하면
비용이 많이 들고 큰 위험을 감수해야 함


##### 26장 메인 컴포넌트
메인 컴포넌트 : 궁극적인 세부사항으로 가장 낮은 수준의 정책
메인 : 모든 팩토리와 전략, 기반 설비를 생성한 후 높은 수준을 담당하는 부분으로 제어권을 넘기는 역할
메인은 클린 아키텍처에서 가장 바깥 원에 위치하는 저수준 모듈


##### 27장 '크고 작은 모든' 서비스들
시스템의 아키텍처는 의존성 규칙을 준수하며 고수준의 정책을 저수준의 세부사항으로부터 분리하는
경계에 의해 정의된다.
서비스는 프로세스나 플랫폼 경걔를 가로지르는 함수 호출
서비스의 이점?
 - 결합 분리의 오류
 - 개발 및 배포 독립성의 오류
서비스가 어느정도 결합되어 있다면 결합된 정도에 맞게 개발, 배포, 운영을 조정해야 한다.
횡단 관심사 : 모두 결합되어 있는 서비스는 독립적으로 개발하고, 배포하거나, 유지될 수 없다

##### 28장 테스트 경계
아키텍처의 관점에서는 모든 테스트가 동일함
테스트는 독립적으로 배포가 가능하다.
테스트는 시스템 컴포넌트중에서 가장 고립되어 있다.
깨지기 쉬운 테스트는 시스템을 뻣뻣하게 만든다.
구조적 결합 : 테스트 결합 중에서 가장 강하며, 가장 은밀하게 퍼져 나가는 유형
보안 : 테스트 API중 위험한 부분의 구현부는 독립적으로 배포할 수 있는 컴포넌트로 분리히야 한다.

##### 29장 클린 임베디드 아키텍처
더그 슈미트의 블로그
'소프트웨어는 닳지 않지만, 펌웨어와 하드웨어는 낡아 가므로 결국 소프트웨어도 수정해야 한다.'
펌웨어를 양산하는 일을 멈추고, 코드에게 유효 수명을 길게 늘릴 수 있는 기회를 주어야 함
소프트웨어를 구축하는 세가지 활동
 - 먼저 동작하게 만들어라
 - 올바르게 만들어라
 - 빠르게 만들어라
앱-티튜드 테스트 : 앱이 동작하도록 만드는 것
클린 임베디드 아키텍처는 테스트하기 쉬운 임베디드 아키텍처이다.
타깃-하드웨어 병목현상 : 임베디드 코드가 클린 아키텍처 원칙과 실천법을 따르지 않고 작성된다면 생기는 현상
타깃-하드웨어 병목현상을 줄이는 방법
1. 계층
2. 하드웨어는 세부사항이다
3. HAL 사용자에게 하드웨어 세부사항을 드러내지 말라
4. 프로세서는 세부사항이다
5. 운영체제는 세부사항이다
6. 인터페이스를 통하고 대체 가능성을 높이는 방향으로 프로그래밍하라
7. DRY 원칙 : 조건부 컴파일 지시자를 반복하지 말라

### 결론
어디에 아키텍처 경계를 둬야할지, 구현할 경계와 무시할 경계를 잘 구분하고 빈틈없이 지켜봐야 한다.
메인은 초기 조건과 설정을 구성하고, 외부 자원을 모두 수집한 후, 제어권을 고수준 정책으로 넘기는 플러그인
서비스는 시스템의 확장성과 개발 가능성 측면에선 유용하지만, 그 자체로는 아키텍처적으로 중요한 요소가 아니다.
테스트는 시스템의 일부이다.
테스트에서 기대하는 이점을 얻을 수 있으려면 테스트가 잘 설계돼야만 한다.
모든 코드가 펌웨어가 되도록 내버려두면 제품이 오래 살아남을수 없게 된다.
클린 임베디드 아키텍처는 제품이 장기간 생명력을 유지하는데 도움을 준다.


----------------------------------------------------------------
